{
  "hash": "18899c4178e3701bd3774f6d8deeb1ca",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Présentation de {afribat}\"\nsubtitle: \"Un data package des chauves-souris africaines pour améliorer la reproductibilité et l’efficacité en recherche sur la biodiversité\"\ndescription: |\n {afribat} est un data package R, conçu pour soutenir la recherche sur la biodiversité en intégrant un ensemble complet de données sur les chauves-souris africaines sous forme de. Construit pour simplifier et automatiser les workflows, {afribat} répond aux défis de reproductibilité dans les études écologiques en offrant un accès programmatique direct à des données de haute qualité publiées dans Nature.\nimage: namespaces/African-bats.jpg\ntitle-block-banner: true\ntoc: true\ndate: \"2025-01-11\"\ncategories: [Data, R, Biodiversité]\nauthor:\n  - name: Ousmane Ouedraogo\n    url: https://oousmane.github.io\n    orcid: 0000-0002-6349-41468\neditor: visual\ncitation:\n url: https://oousmane.github.io/programming-is-thinking\n---\n\n\n\n## Introduction\n\nL’Afrique est un foyer de biodiversité parmi les plus riches au monde, et les chauves-souris y occupent une place centrale, jouant un rôle clé dans la pollinisation, le contrôle des insectes nuisibles et la dispersion des graines.\nCependant, la recherche sur la biodiversité dans cette région se heurte souvent à des défis liés à l’accessibilité des données, à la reproductibilité et à l’intégration des workflows.\nPour répondre à ces problématiques, j’ai développé **{afribat}**, un data package R conçu pour contribuer à la recherche sur les chauves-souris africaines tout en favorisant la reproductibilité et l’efficacité.\n\n{afribat} est basé sur le jeu de données publié par Monadjem et al. (2024) dans *Scientific Data* (*Nature*) .\nCe jeu de données, rigoureusement élaboré, constitue une ressource essentielle pour les chercheurs.\nEn embarquant ces données directement dans le package, {afribat} élimine la gestion fastidieuse des fichiers CSV et facilite une intégration fluide dans les workflows.\nDe plus, le package comprend des fonctions utilitaires pour calculer des indices de biodiversité tels que la richesse spécifique et la diversité de Shannon.\nAinsi, ce package se veut être solution pour étudier les distributions des espèces, leurs métriques de diversité, et bien plus encore.\nAvec {afribat}, les chercheurs peuvent se concentrer sur la génération d’insights pour soutenir les efforts de conservation tout en garantissant des workflows transparents et reproductibles.\n\n## Prérequis pour reproduire les analyses\n\nPour suivre et reproduire les analyses présentées dans ce blog, vous allez créer un projet structuré nommé **`intro-afribat/`**.\nCette organisation permettra une gestion claire des données et des scripts tout en facilitant la reproductibilité.\n\n``` r\nintro-afribat/\n├── data/                # Répertoire pour stocker les données\n├── README.md            # Description du projet\n├── intro-afribat.Rproj  # Fichier de projet RStudio\n```\n\nAssurez-vous également d’installer tous les packages nécessaires pour exécuter les analyses :\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Installer les packages requis\ninstall.packages(c(\"devtools\", \"tidyverse\", \"sf\"))\n\n# Installer afribat depuis GitHub\ndevtools::install_github(\"oousmane/afribat\")\n```\n:::\n\n\n\nNous allons, pour l'exemple utiliser les données cartographiques de l'Angola via GADM pour filtrer les données et calculer quelques indices de biodiversités.\nLe code ci-après permet de télecharge le fichier geopackage nommé \\`gadm41_AGO.gpkg\\` dans data/.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndownload.file(\n  url = \"https://geodata.ucdavis.edu/gadm/gadm4.1/gpkg/gadm41_AGO.gpkg\",\n  destfile = \"data/gadm41_AGO.gpkg\"\n)\n```\n:::\n\n\n\nUne visualisation rapide des données\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\n\nago <- read_sf(\"data/gadm41_AGO.gpkg\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in CPL_read_ogr(dsn, layer, query, as.character(options), quiet, :\nautomatically selected the first layer in a data source containing more than\none.\n```\n\n\n:::\n\n```{.r .cell-code}\nggplot()+\n  geom_sf(data = ago, color = \"black\",linewidth = 1)\n```\n\n::: {.cell-output-display}\n![](presentation-afribat_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n## Visualisation de distribution géographique des espèces\n\nL’un des points forts de {afribat} est sa capacité à faciliter l’analyse et la visualisation des données géoréferencées, permettant de mieux comprendre la répartition des espèces de chauves-souris en Afrique.\nUne visualisation rapide de toute la base de données est produites sur la\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(afribat)\n\ndf <- afribat::afribats_sf\n\nggplot()+\n  geom_sf(data =df, aes (color = species))+\n  scale_color_viridis_d()+\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](presentation-afribat_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\nL’utilisation du format **sf** (Simple Features) pour les données {afribat} offre des possibilités étendues pour les analyses spatiales en R, en tirant parti de la puissance des packages du **tidyverse**.\nPar exemple, la fonction `sf::st_filter()`facilite la sélection des données d’une zone géographique spécifique, comme l’Angola.\nEn parallèle, les outils robustes de **dplyr** (`group_by()`, `summarise()`, `filter()`) et de **tidyr** permettent des manipulations avancées et flexibles, incluant des jointures spatiales avec d’autres couches de données environnementales.\nCette combinaison entre simplicité et puissance ouvre la voie à des analyses géospatiales intégrées et approfondies.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(afribat)\n\ndf <- afribat::afribats_sf\n\nago <- read_sf(\"data/gadm41_AGO.gpkg\")\n\nago_df <- st_filter(x=df,y=ago,.predicate = st_intersects)\nago_df\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSimple feature collection with 350 features and 11 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 12.13 ymin: -17.93 xmax: 23.38 ymax: -5.13\nGeodetic CRS:  WGS 84\n# A tibble: 350 × 12\n   family       genus species museum date        year country location reference\n * <chr>        <chr> <chr>   <chr>  <date>     <dbl> <chr>   <chr>    <chr>    \n 1 Emballonuri… Cole… afra    <NA>   NA            NA Angola  Benguela Crawford…\n 2 Emballonuri… Cole… afra    IICA5… NA            NA Angola  Novo Re… Monadjem…\n 3 Emballonuri… Sacc… peli    <NA>   NA            NA Angola  Lago Ca… Crawford…\n 4 Emballonuri… Taph… maurit… IICA45 1960-12-28  1960 Angola  Luanda   Monadjem…\n 5 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Benguela Crawford…\n 6 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Caiundo  Crawford…\n 7 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Catumbe… Crawford…\n 8 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Dundo    Crawford…\n 9 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Duque d… Crawford…\n10 Emballonuri… Taph… maurit… <NA>   NA            NA Angola  Humbe    Crawford…\n# ℹ 340 more rows\n# ℹ 3 more variables: holotype <chr>, checked <chr>, geometry <POINT [°]>\n```\n\n\n:::\n:::\n\n\n\nUne fois les données filtrées sur l'Angola, nous pouvons produire une carte de la distribution des espèces de chauves-souris\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(afribat)\n\ndf <- afribat::afribats_sf\n\nago <- read_sf(\"data/gadm41_AGO.gpkg\")\n\nago_df <- st_filter(x=df,y=ago,.predicate = st_intersects)\n\nggplot()+\n  geom_sf(data =ago)+\n  geom_sf(data = ago_df,color= \"blue\", size = 3)\n```\n\n::: {.cell-output-display}\n![](presentation-afribat_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\nComme mentionné précédemment, {afribat} ne se limite pas à embarquer des données.\nLe package propose également des fonctions utilitaires conçues pour calculer divers indices de biodiversité, facilitant ainsi les analyses écologiques.\nPour en savoir davantage sur ses fonctionnalités et son utilisation, consultez la documentation <https://oousmane.github.io/afribat>\n\nIndice de Shannon-Weiner\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshannon_weiner(ago_df$species)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3.644943\n```\n\n\n:::\n:::\n\n\n\n\\\nUne meta fonction pour calculer en une fois tous les indices présentement disponibles\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbiodiv_indices <- function(x){\n  a <- shannon_weiner(x)\n  b <- evenness(x)\n  c <- simpson(x)\n  d <- margalef(x)\n  \n  return(\n    list(\n      marglef = d,\n      shannon_weiner = a,\n      simpson = c,\n      evenness = b\n    )\n  )\n}\n\nbiodiv_indices(ago_df$species)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$marglef\n[1] 10.41323\n\n$shannon_weiner\n[1] 3.644943\n\n$simpson\n[1] 26.75841\n\n$evenness\n[1] 0.8831656\n```\n\n\n:::\n:::\n\n\n\n## Conclusion\n\nEn proposant les données sous format {`sf}`, {afribat} offre une flexibilité exceptionnelle pour les analyses géospatiales.\nQue vous souhaitiez explorer les distributions d’espèces, effectuer des jointures spatiales, ou filtrer des données selon des régions d’intérêt, Afribat simplifie ces tâches tout en intégrant des outils modernes comme {dplyr} et {ggplot2}. \n**Essayez le dès aujourd’hui et découvrez tout le potentiel des analyses reproductibles en écologie !**\n\n## Remerciements\n\nJe tiens à remercier Idrissa Ouedraogo et Parfait Thiombiano pour leur relecture des formules des indices de biodiversité, ainsi que les auteurs de African Bat Database pour leur précieuse contribution à la recherche en écologie particulièrement dans l'étude et la conservation des chauves-souris.\n",
    "supporting": [
      "presentation-afribat_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}